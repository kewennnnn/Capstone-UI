<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'"> -->
    <link href="../styles.css" rel="stylesheet">
    <title>LivUltra by Capstone S06</title>
  </head>
  <body>
    <progress-bar current=2></progress-bar>
    <div id="app">
      <div class="tooltip-positioner" style="position:absolute; top:180px; left:0;">
          <my-tooltip 
            tipNumber="2"
            position="tooltip-popup-fullscreen"
            content1="<h3>Platelet is extremely low, please refer patient to a specialist.</h3>"
            content2="Screening step is not required unless you would like to find out the estimated risk of advanced fibrosis."
            content3="<div style='width:max-content;margin:auto'><a href='../index.html'><button>End Session</button></a> <a href='./screening-intro.html'><button class='button-secondary'>Start Screening</button></a></div>"">
          </my-tooltip>
        </div>
      <div class="col-left">
        <h2>Enter Platelet Count</h2>
        <div class="flex-row" style="justify-content: center">
          <h1 id="input-value"></h1>
          <span id="input-unit"><h2>x1000</h2></span>
          <div class="tooltip-positioner" style="bottom:150px">
            <my-tooltip 
              content1="Platelet count can be obtained from a Full Blood Test."
              content2="This value is optional, but will help improve the diagnosis generated by our Machine Learning algorithm.">
            </my-tooltip>
          </div>
        </div>
        <div>
          <!-- <a href="./weight.html" id="back"><button class="button-hollow">Back</button></a> -->
          <a href="../index.html" id="back"></a>
          <span id="next"></span>
        </div>
      </div>

      <div class="col-right">
        <my-keypad showDec="false" />
      </div>

      
      <!-- <div id="tooltip-popup">
        <p>Platelet count can be obtained from a Full Blood Test.</p>
        <p>This value will help improve the diagnosis generated by our Machine Learning algorithm, but is optional. </p>
      </div> -->
        

    </div>
    <script src="../renderer.js"></script>
    <script src="../components/progressbar.js"></script>
    <script src="../components/keypad.js"></script>
    <script src="../components/storage.js"></script>
    <script src="../components/buttons.js"></script>
    <script src="../components/tooltip.js"></script>
    <script src="https://cdn.lordicon.com/xdjxvujz.js"></script>

    <script>
      document.getElementById("input-value").innerHTML = getPlatelet();
      document.getElementById("back").innerHTML = backButton();
      updateNextButton();
      function clickedNext() {
        let val = getPlatelet();
        console.log("platelet",val);
        if (val!="" && val<150) {
          console.log("showww")
          fadeTip(2);
        } else {
          window.location.href = "./screening-intro.html";
        }
      }
      document.getElementById("next").addEventListener("click", () => setPlatelet());
      document.getElementById("next").addEventListener("click", () => clickedNext());
      document.getElementById("back").addEventListener("click", () => setPlatelet());
      document.getElementById("numpad-d").addEventListener("click", () => delKey());
      // document.getElementById("pb-help").addEventListener("click", () => {
      //   if (document.getElementById("tooltip-popup").style.opacity == 0) {
      //     document.getElementById("tooltip-popup").style.display = "block";
      //     setTimeout(()=>{document.getElementById("tooltip-popup").style.opacity = 1;}, 100)
      //   } else {
      //     document.getElementById("tooltip-popup").style.opacity = 0;
      //     setTimeout(()=>{document.getElementById("tooltip-popup").style.display = "none";}, 500)
      //   }
      // });
      // document.getElementById("tooltip-cross").addEventListener("click", () => {
      //   document.getElementById("tooltip-popup").style.opacity = 0;
      //   setTimeout(()=>{document.getElementById("tooltip-popup").style.display = "none";}, 500)
      // });
    </script>
  </body>
</html>
